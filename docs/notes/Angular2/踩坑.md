# 记录一些angular2开发中遇到的坑

## ng6中 ng build libraryName 后，一个组件内错误却在组件前标识为了指令

`Error: (1,1): : Directive ProjectItemPanelComponent, Expected 0 arguments, but got 1.`

经排查，是ProjectItemPanelComponent组件中的`HostListener`没有提供形参：
```js
@HostListener("click", ["$event"])
projectItemPanelHide() {
   //this.projectService.itemPanelIsShow = false;
}

//加上形参就行了
@HostListener("click", ["$event"])
projectItemPanelHide(event) {
   //this.projectService.itemPanelIsShow = false;
}
```

## ng6中 ng build libraryName 后， 报无法读取'module'属性的错：

`Cannot read property 'module' of undefined
TypeError: Cannot read property 'module' of undefined`

经排查，是导入服务时，路径最后加上了`/index`导致：
`import { ProjectService,DoActionService} from '../../service/index';`

去掉`/index`即可，ng6打包服务会自动去service文件夹下查找index.ts文件

## template中使用枚举类型报错：

`Error: projects\sys\src\lib\component\message-model\message-model.component.html(3,27): : This condition will always return 'false' since the types 'MessageType' and '"1"' have no overlap.`

经排查，是对比类型和枚举类型不一致导致：

`model_hd_serious:message.type=='1',model_hd_crash:message.type=='9',model_hd_communication:message.type=='16'`

```
export enum MessageType {
    normal=0,
    serious,
    crash=9,
    communication=16
}
```

enum是number类型，对比类型却用了string类型。
