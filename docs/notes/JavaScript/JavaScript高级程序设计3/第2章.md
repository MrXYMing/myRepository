# JavaScript高级程序设计3

## 第二章 在HTML中使用JavaScript

### 2.1 \<script>元素

属性：

- async：可选，表示应该立即下载脚本，但不应妨碍页面中的其他操作，比如下载其他资源或等待加载其他脚本。只对外部脚本文件有效。
- charset：可选，表示通过src属性指定的字符集。大多数浏览器会忽略它的值，因此很少有人用这个属性。
- defer：可选，表示脚本可以延迟到文档完全被解析和显示之后再执行。支队外部脚本文件有效。IE7及更早版本对嵌入脚本也支持这个属性。
- language：已废弃，原来用于表示编写代码使用的脚本语言。
- src：可选，表示包含要执行代码的外部文件。
- type：可选，表示编写代码使用的脚本语言的内容类型。text/javascript 和 text/acmascript 都已不被推荐使用。实际上，服务器在传送JavaScript文件时使用的MIME类型通常是application/x-javasctipt，但在type中设置这个值却可能导致脚本被忽略。

在使用\<script>元素嵌入JavaScript代码时，只需为\<script>指定type属性 type="text/javascript"。

在使用\<script>嵌入JavaScript代码时，不要在代码中的任何地方出现“<\/script>”字符串，因为按照解析嵌入式代码的规则，当浏览器遇到字符串“<\/script>”时，就会认为那是结束的标签，通过转义字符，来将代码分成两部分来写就会造成浏览器的误解了：`<\/script>`。

#### 2.1.1 标签的位置

在文档的`<head>`元素中包含所有JavaScript文件，意味着必须等到全部JavaScript代码都被下载、解析和执行完成后，才能开始呈现页面的内容（浏览器遇到\<body>标签时才开始呈现内容）。

#### 2.1.2 延迟脚本

\<script>标签定义的defer属性，是用来表明脚本在执行时不会影响页面的构造，也就是说，脚本会被延迟到整个页面都解析完毕后再运行。`<script defer="defer">`相当于告诉浏览器立即下载，但延迟执行。

在现实中，延迟脚本并不一定会按照顺序执行，也不一定会子啊DOMContentLoaded事件触发前执行，因此最好只包含一个延迟脚本。

IE4、Firefox3.5、Safari5和Chrome是最早支持defer属性的浏览器，其他浏览器会忽略这个属性，支持HTML的实现也会忽略嵌入脚本设置的defer属性，想平常一样处理脚本。因此，把延迟脚本放在页面底部仍然是最佳选择。

---

### 2.3 文档模式

- 混杂模式：会让IE的行为与（包含非标准特性的）IE5相同；
- 标准模式：让IE的行为更接近标准行为；

这两种模式主要影响CSS内容的呈现，但在某些情况下也会影响到js的解释执行。

- 准标准模式：这种模式下的浏览器特性有很多都是符合标准的，但也不尽然，不标准的地方主要体现在处理图片间隙的时候（在表格中使用图片时问题最明显）。

如果在文档开始处没有发现文档类型声明，则所有浏览器都会默认开启混杂模式。

---

### 2.4 \<noscripe>元素

这个元素可以包含能够出现在文档\<body>中的任何HTML元素--\<script>元素除外。只有在浏览器不支持脚本；或者浏览器支持脚本，但脚本被禁用的情况下才会显示出来。

```html
<body>
    <noscript>
        <p>本页面需要浏览器支持（启用）JavaScript</p>
    </noscript>
</body>
```